task_id: "PRIORITY-001"
level: 5
category: "Urgent Interrupt - Meeting Conflict"
channels: ["Email", "SMS"]
difficulty: "hard"

description: |
  Test priority handling when urgent request interrupts ongoing task.

input:
  sequence:
    - step: 1
      channel: "Email"
      from: "user@example.com"
      to: "{{persona_email}}"
      subject: "Research needed - AI tools comparison"
      body: |
        Can you research and compare the top 5 AI coding assistants?
        I need features, pricing, and pros/cons for each.

        No rush - sometime this week is fine.
      timestamp: "2025-01-15T10:00:00-08:00"
      expected_duration: "10-15 minutes"
      priority: "low"

    - step: 2
      channel: "SMS"
      from: "+15551234567"
      to: "{{persona_phone}}"
      content: "URGENT - I'm double-booked at 2pm today. Move one meeting please!"
      timestamp: "2025-01-15T10:03:00-08:00"
      interruption_time: "3 minutes into step 1"
      priority: "urgent"
      expected_action_time: "Current time 10:03am, meeting at 2pm = 3h 57min away"

success_criteria:
  - type: "interrupt_recognition"
    evaluation: "deterministic"
    weight: 0.2
    requires: "Must recognize URGENT flag and prioritize"

  - type: "context_preservation"
    evaluation: "deterministic"
    weight: 0.2
    requires: "Must save state of research task"

  - type: "urgent_response_speed"
    evaluation: "deterministic"
    weight: 0.3
    max_seconds: 30
    requires: "SMS response within 30 seconds"

  - type: "urgent_task_handling"
    evaluation: "llm_judge"
    weight: 0.3
    requires: |
      Must:
      - Check 2pm calendar
      - Identify conflicting meetings
      - Move one meeting or propose solution
      - Confirm resolution
    rubric: |
      - Full: Problem resolved within 2 minutes
      - Partial (0.6): Identified conflict, needs user input
      - Fail: Continued research task

metadata:
  estimated_duration: "90s total"
  requires_external_tools: ["calendar_read", "calendar_write", "task_queue"]
  tags: ["priority", "interruption", "urgent", "context-switching"]

human_baseline:
  success_rate: 0.75
  avg_urgent_response_time: 25

evaluation_notes: |
  Key test: Does assistant:
  1. Stop non-urgent task immediately
  2. Handle urgent request
  3. Return to original task after

  Failure modes:
  - Ignoring urgency flag
  - Not pausing research
  - Slow urgent response
  - Forgetting to resume research
