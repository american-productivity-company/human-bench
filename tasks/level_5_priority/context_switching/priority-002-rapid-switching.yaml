task_id: "PRIORITY-002"
level: 5
category: "Rapid Context Switching"
channels: ["Slack", "Email", "SMS"]
difficulty: "very_hard"

description: |
  Test handling multiple rapid context switches across channels.

input:
  sequence:
    - step: 1
      channel: "Slack"
      from: "@manager"
      to: "{{persona_slack_handle}}"
      content: "Can you prepare the sales numbers for the board deck?"
      timestamp: "2025-01-15T14:00:00-08:00"
      priority: "medium"

    - step: 2
      channel: "Email"
      from: "client@example.com"
      to: "{{persona_email}}"
      subject: "Production bug - customers affected"
      body: "We have a critical bug affecting checkout. Need immediate attention."
      timestamp: "2025-01-15T14:02:00-08:00"
      priority: "critical"

    - step: 3
      channel: "SMS"
      from: "+15551234567"
      to: "{{persona_phone}}"
      content: "What time is my 1:1 with Sarah tomorrow?"
      timestamp: "2025-01-15T14:03:00-08:00"
      priority: "low"

    - step: 4
      channel: "Slack"
      from: "@manager"
      to: "{{persona_slack_handle}}"
      content: "Actually the sales numbers can wait - handle that bug first"
      timestamp: "2025-01-15T14:04:00-08:00"
      priority: "medium"

success_criteria:
  - type: "priority_ordering"
    evaluation: "deterministic"
    weight: 0.4
    requires: |
      Must handle in order:
      1. Critical bug (step 2) - immediate
      2. Quick calendar check (step 3) - 30 sec
      3. Return to bug investigation
      4. Sales numbers when complete

  - type: "response_times"
    evaluation: "deterministic"
    weight: 0.3
    requires: |
      - Bug acknowledgment: < 30 seconds
      - Calendar query: < 45 seconds
      - Manager update: < 60 seconds

  - type: "context_maintenance"
    evaluation: "llm_judge"
    weight: 0.3
    requires: |
      Must:
      - Track all 3 tasks
      - Not drop any requests
      - Communicate status to manager
      - Complete quick tasks without derailing urgent work
    rubric: |
      - Full: All tasks handled appropriately
      - Partial (0.6): Missed priority or timeline
      - Fail: Dropped tasks or wrong order

metadata:
  estimated_duration: "240s"
  requires_external_tools: ["task_queue", "priority_management", "calendar_read"]
  tags: ["priority", "multi-task", "rapid-switching", "triage"]

human_baseline:
  success_rate: 0.65
  avg_total_time: 300

complexity_factors:
  - "4 minutes, 4 requests, 3 channels"
  - "Shifting priorities"
  - "Mix of quick/long tasks"
  - "Manager override"
